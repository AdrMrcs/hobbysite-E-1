{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ name }}
{% endblock %}

{% block content %}
  <p>Hello {{ user.username }}! </p>
  <h1>Articles</h1>

  {% if request.user.is_authenticated %}
    <h1>My Articles</h1>
      <ul>
        {% for article in ownarticles %}
          <li><a href="{{ article.get_absolute_url }}">{{ article.title }}</li>
        {% endfor %}
        </ul>
        <a href="{% url 'blog:article-create' %}"><button>Create Article</button></a>
  {% endif %}

<h1>All Articles</h1>
{% for article_category in object_list %}
  <h2>{{ article_category.name }}</h2>
  <ul>
    {% for article in article_category.articles.all %}
      {% if request.user.is_authenticated %}
        {% if article not in ownarticles %}
          <li><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></li>
        {% endif %}
      {% else %}
        <li><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></li>
      {% endif %}
    {% endfor %}
  </ul>
{% endfor %}
{% endblock %}
