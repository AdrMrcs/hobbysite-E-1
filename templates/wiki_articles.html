{% extends 'base.html' %}
{% load static %}

{% block header %} Wiki Articles {% endblock %}
{% block title %}Hobbysite{% endblock %}
{% block content %}

<h1>Wiki Articles</h1>
{% if user.is_authenticated %}
    <h2>Your Articles</h2>
    <ul>
        {% for article in user.profile.article.all %}
            <li><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></li>
        {% endfor %}
    </ul>
{% endif %}

<h2>All Articles by Category</h2>
{% for category in object_list %}
    <h3>{{ category.name }}</h3>
    <ul>
        {% for article in category.article.all %}
            {% if not user.is_authenticated or article.author != user %}
                <li><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></li>
            {% endif %}
        {% endfor %}
    </ul>
{% endfor %}

{% endblock %}